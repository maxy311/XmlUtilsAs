!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2)),r=n(3);function l(e){if(!e)return null;return-1!==e.indexOf("status")&&-1==e.indexOf("/photo")?-1!==e.indexOf("?")?(0,o.between)(e,"/status/","?"):e.slice(e.indexOf("/status/")+8):null}window.videoCheck=function(e){if(console.log("videoCheck url",e),i.showDownloadBtn("disable"),null!==l(e)){var t=document,n=new MutationObserver(function(e){document.getElementsByTagName("article")[0]&&document.getElementsByTagName("article")[0].getElementsByTagName("video").length>0&&(console.log("page has video"),i.showDownloadBtn("analyze"),n.disconnect())});n.observe(t,{childList:!0,subtree:!0})}},window.getVideoInfo=function(e){if(console.log("getVideoInfo url",e),null!==l(e)){var t=function(e){console.log("twitter","getInfo start");var t=l(e);if(!t)return console.log("twitter","vid is null"),!1;var n={Authorization:"Bearer AAAAAAAAAAAAAAAAAAAAAPYXBAAAAAAACLXUNDekMxqa8h%2F40K4moUkGsoc%3DTYfbDKbT3jJPCEVnMYqilB28NHfOPqkca3qaAxGfsyKCs0wRbw",Referer:e,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"},s={url:"https://api.twitter.com/1.1/guest/activate.json",method:"post",header:JSON.stringify(n)},u=JSON.parse(i.http(s)).result;u=JSON.parse(u).guest_token,n["x-guest-token"]=u,console.log("twitter","guest_token:"+u);var a={url:"https://api.twitter.com/1.1/statuses/show.json?include_profile_interstitial_type=1&include_blocking=1&include_blocked_by=1&include_followed_by=1&include_want_retweets=1&skip_status=1&cards_platform=Web-12&include_cards=1&include_ext_alt_text=true&include_reply_count=1&tweet_mode=extended&trim_user=false&include_ext_media_color=true&id="+t,method:"get",header:JSON.stringify(n)};console.log("params2");var d=JSON.parse(i.http(a)).result;d=JSON.parse(d),console.log("twitter","get config success");var c=d.full_text;console.log(c);var f=new r.dl_video;if(f.id=t,f.title=c,f.source="twitter",!d.extended_entities)return console.log("config.extended_entities is null"),!1;for(var p=d.extended_entities.media,g=0;g<p.length;g++){var h=p[g],v=h.type;if(f.thumbnail=h.media_url,"video"===v){var w=h.video_info.variants,_=!0,y=!1,b=void 0;try{for(var m,O=w[Symbol.iterator]();!(_=(m=O.next()).done);_=!0){var A=m.value,x=A.url;if("video/mp4"===(v=A.content_type)){var S=new r.dl_video_file;S.id=t,S.url=x,S.format="MP4";var B=(0,o.between)(x,"/vid/","/");B&&(B=B.split("x")[1]+"P"),S.resolution=B||"MP4",f.videos.push(S)}}}catch(e){y=!0,b=e}finally{try{!_&&O.return&&O.return()}finally{if(y)throw b}}}}return 0!==f.videos.length&&f}(e);t?(console.log(JSON.stringify(t)),i.setVideoInfo(t)):i.setVideoInfoError()}else i.setVideoInfoError()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.al=function(){alert("start")},t.replace_handle=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&quot;/g,'"')).replace(/&#123;/g,"}")).replace(/&amp;/g,"&")).replace(/u003C/g,"<")).replace(/\\3a/i,":")).replace(/\\26/g,"&")).replace(/\\3d/g,"=")).replace(/\\25/g,"%")).replace(/\\/g,"")).replace(/&#039;/g,"'")).replace(/ /g,"")},t.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<(window.innerHeight||document.documentElement.clientHeight)};var o=t.indexOf=function(e,t){return t instanceof RegExp?e.search(t):e.indexOf(t)};t.between=function(e,t,n){var i=o(e,t);return-1===i?"":(e=e.slice(i+t.length),-1===(i=o(e,n))?"":e=e.slice(0,i))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.http=function(e){var t={url:"",isEncode:!1,postData:"",method:"",header:""};return t=Object.assign(t,e),window.shareitBridge.syncInvoke("download","httpRequest",JSON.stringify(t))},t.setVideoInfo=function(e){window.videoBrowser.setVideoInfo(JSON.stringify(e))},t.showVideoInfo=function(e){window.videoBrowser.showVideoInfo(JSON.stringify(e))},t.showDownloadBtn=function(e){window.videoBrowser.showDownloadBtn(e)},t.setVideoInfoError=function(e){window.videoBrowser.setVideoInfoError()},t.httpGetCookie=function(e){return window.videoBrowser.httpGetCookie(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dl_video=function(){this.id="",this.title="",this.description="",this.thumbnail="",this.source="",this.audios=[],this.videos=[]},t.dl_video_file=function(){this.id="",this.resolution="",this.bitrate="",this.width=0,this.height=0,this.format="",this.size="",this.url=""}}]);